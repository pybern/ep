# .github/workflows/sync-to-org.yml
name: Sync to Organization Repo (nggdim)

on:
  push:
    branches:
      - main

jobs:
  sync:
    if: github.repository != 'nggdim/ep'
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Push to organization repo
        env:
          PAT: ${{ secrets.ORG_REPO_PAT }}
        run: |
          if git remote get-url org >/dev/null 2>&1; then
            git remote set-url org https://x-access-token:${PAT}@github.com/nggdim/ep. git
          else
            git remote add org https://x-access-token:${PAT}@github.com/nggdim/ep.git
          fi
          git push org main --force
